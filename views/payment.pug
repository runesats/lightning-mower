head
    script(src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js')
    liunk(link rel="stylesheet", href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css", integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm", crossorigin="anonymous")
    link(rel='stylesheet', href='style.css')
    link(rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en")
    script.

        var animation = document.getElementById('successAnimation');
        
        function showSuccess() {

            $('#content').replaceWith('<svg id="successAnimation" class="animated" xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 70 70">'+
            '<path id="successAnimationResult" fill="#D8D8D8" d="M35,60 C21.1928813,60 10,48.8071187 10,35 C10,21.1928813 21.1928813,10 35,10 C48.8071187,10 60,21.1928813 60,35 C60,48.8071187 48.8071187,60 35,60 Z M23.6332378,33.2260427 L22.3667622,34.7739573 L34.1433655,44.40936 L47.776114,27.6305926 L46.223886,26.3694074 L33.8566345,41.59064 L23.6332378,33.2260427 Z"/>'+
            '<circle id="successAnimationCircle" cx="35" cy="35" r="24" stroke="#979797" stroke-width="2" stroke-linecap="round" fill="transparent"/>'+
            '<polyline id="successAnimationCheck" stroke="#979797" stroke-width="2" points="23 34 34 43 47 27" fill="transparent"/>'+
            '</svg>')


            setTimeout(function() {
                location.reload();
            }, 1000*5)
            
        }

        function pollMower() {
            setTimeout(function() {
                $.ajax({ url: 'http://localhost:8080/mower/', success: function(data) {
                    if (data == "paid") {

                        showSuccess()

                    } else {
                        poll(invoice)
                    }
                }});
            }(invoice), 5000);
        }
        function poll(invoice) {
            console.info(invoice);
            setTimeout(function() {
                $.ajax({ url: 'http://localhost:8080/invoice/'+invoice, success: function(data) {
                    console.info(data)
                    if (data == "paid") {

                        showSuccess()

                    } else {
                        poll(invoice)
                    }
                }});
            }(invoice), 5000);
        }
body

    div
        div
            p Use your Lightning Wallet to scan the code or click on the code to start your local wallet


        div#content
            a(href="lightning://" #{ inv.payreq })
                img.d-block.w-100.mb-3(src=qr)

    script.
        poll('!{inv.id}')
        
        